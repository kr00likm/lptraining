<html>
  <head>
    <title>LP-Brand</title>
     <script src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>
   <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
       
    lpTag.agentSDK.init()
var updateCallback = function(data) {
    var newLine = data.newValue;
    let usertext = document.getElementById("usertext");
    let agenttext = document.getElementById("agenttext");
    if (newLine[0].by == "Visitor") {
        usertext.innerHTML = newLine[0].text;
    } else {
        agenttext.innerHTML = newLine[0].text;
    }
};

var notifyWhenDone = function(err) {
    if (err) {
        console.log(err);
    }
    console.log("set the value");
};
var pathToData = "chatTranscript.lines";
lpTag.agentSDK.bind(pathToData, updateCallback, notifyWhenDone);
          
        </script>
    
  </head>
  <body>
    <h1>OMDb search</h1>
    <form class = "inputFrame">
        <input type="text" name="search" id = movie/>
        <input type="button" value="search" id="submit" />
    </form>
    
    <form class = "outputFrame">
        <input type="text" name="result" id = result/>
    </form>
    
    
     <p>This is what the user just said:</p>
        <p id="usertext"></p>
        <p>This is what the agent just said:</p>
        <p id="agenttext"></p>
    
    <p> test omdb </p>
    <p id="funcres"></p>
    <p id="funcres1"></p>
    <p id="funcres2"></p>
    <p id="funcres3"></p>
   <pre id="json"></pre>
 
    
      <script>
   
    

     async   function makeGetRequest2() {

  let res = await axios.get('https://www.omdbapi.com/?t=batman&apikey=b9066cfb');
console.log(typeof(res));
  var data = res.data;
  
  console.log(data);
console.log(typeof(data));
  
  
  return data;
}
    var result ="";    
         function makeGetRequest() {
        result =  axios.get('https://www.omdbapi.com/?t=batman&apikey=b9066cfb')
    .then(resp => {
        console.log(resp.data);
          response = resp.data.Title;
          console.log(response);
          return response
    })
    .catch(err => {
        // Handle Error Here
        console.error(err);
    });
                  }
        
        

     
   //  makeGetRequest().then(res => {
        //console.log('test then ' + res)
        
        const movieTitle = document.getElementById("funcres");
        const movieYear = document.getElementById("funcres2");
        movieTitle.innerHTML = makeGetRequest()
        movieYear.innerHTML = "2020"
                  
      console.log("test funkcji");
       console.log(makeGetRequest());
   //  });
        
        
        const data = makeGetRequest()
        
        console.log(data);
    </script>
    
   
    

    
  </body>
</html>
